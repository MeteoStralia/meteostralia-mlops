schema: '2.0'
stages:
  mlflow_setup:
    cmd: python .\src\tracking_service\mlflow\experiment_setup.py
    deps:
    - path: .\src\tracking_service\mlfow\experiment_setup.py
      hash: md5
      md5: 75e59ffa21e9ba86176b67426a208947
      size: 1436
    outs:
    - path: .\data\parameters
      hash: md5
      md5: 4589f5aaa663b8f8ec1f6136b07a8a2b.dir
      size: 2227
      nfiles: 4
  reset_data:
    cmd: python .\src\data_service\ingest_data\reset_data.py
    deps:
    - path: .\data\new_data\
      hash: md5
      md5: d9a40844d7172f1bf377f978335971bc.dir
      size: 168439
      nfiles: 1
    - path: .\data\raw_data\weatherAUS.csv
      hash: md5
      md5: 38be9d9fce05fc044df3443939cdd18d
      size: 14239516
    - path: .\src\data_service\ingest_data\reset_data.py
      hash: md5
      md5: 6d951c234aa7b88fade2e4a0ccc6bb93
      size: 847
    outs:
    - path: .\data\current_data\current_data.csv
      hash: md5
      md5: d7f477ac8a20f9a4e8fcff738b2a071e
      size: 18774683
  ingest_new_data:
    cmd: python .\src\data_service\ingest_data\ingest_new_data.py
    deps:
    - path: .\data\current_data\current_data.csv
      hash: md5
      md5: d7f477ac8a20f9a4e8fcff738b2a071e
      size: 18774683
    - path: .\src\data_service\ingest_data\ingest_new_data.py
      hash: md5
      md5: 1731b8066666703db050bd58ee4ad741
      size: 2914
    outs:
    - path: .\data\current_data\uptodate_data.csv
      hash: md5
      md5: d7f477ac8a20f9a4e8fcff738b2a071e
      size: 18774683
  complete_nas:
    cmd: python ./src/data_service/complete_nas/complete_nas.py
    deps:
    - path: ./src/data_service/complete_nas/complete_nas.py
      hash: md5
      md5: 7d7aeffbf1a4caa26668760f69a22e55
      size: 5282
    - path: .\data\current_data\uptodate_data.csv
      hash: md5
      md5: d7f477ac8a20f9a4e8fcff738b2a071e
      size: 18774683
    outs:
    - path: ./data/processed_data/nas_completed_data.csv
      hash: md5
      md5: 1f3643e04979de6f5735303185d8ece6
      size: 20181185
  add_features:
    cmd: python ./src/data_service/features/add_features.py
    deps:
    - path: ./data/processed_data/nas_completed_data.csv
      hash: md5
      md5: 1f3643e04979de6f5735303185d8ece6
      size: 20181185
    - path: ./src/data_service/features/add_features.py
      hash: md5
      md5: 2fa4fb8bce43053c6a811f5559f7f508
      size: 1952
    outs:
    - path: ./data/processed_data/augmented_data.csv
      hash: md5
      md5: f32dc1a2db00507d47a8bd29dd3db78b
      size: 22688013
  encode_data:
    cmd: python ./src/data_service/encode_data/encode_data.py
    deps:
    - path: ./data/processed_data/augmented_data.csv
      hash: md5
      md5: f32dc1a2db00507d47a8bd29dd3db78b
      size: 22688013
    - path: ./src/data_service/encode_data/encode_data.py
      hash: md5
      md5: 3fa546642b1ecbe6d5c3aa27a7c54d67
      size: 8509
    outs:
    - path: ./data/processed_data/encoded_data.csv
      hash: md5
      md5: d38fe281c736c13ce3aeee5821357104
      size: 46416225
  split_data:
    cmd: python ./src/data_service/split_data/split_data.py
    deps:
    - path: ./data/processed_data/encoded_data.csv
      hash: md5
      md5: d38fe281c736c13ce3aeee5821357104
      size: 46416225
    - path: ./src/data_service/split_data/split_data.py
      hash: md5
      md5: 57144aa3cd9f4b1dfbd4b8ad1e8842f3
      size: 3308
    outs:
    - path: ./data/processed_data/X_test.csv
      hash: md5
      md5: fb526bac79c65e2b7b30ebf37f153bc8
      size: 7159379
    - path: ./data/processed_data/X_train.csv
      hash: md5
      md5: 0c4a9b0143c92db522a164cb2ac07c0a
      size: 28633417
    - path: ./data/processed_data/y_test.csv
      hash: md5
      md5: 2dc46ee320a0fd79699f1e859dc3ebb3
      size: 52727
    - path: ./data/processed_data/y_train.csv
      hash: md5
      md5: 4cbc77e19f9426df0931e2e1e79fa510
      size: 210867
  scale_data:
    cmd: python ./src/data_service/scale_data/scale_data.py
    deps:
    - path: ./data/processed_data/X_test.csv
      hash: md5
      md5: fb526bac79c65e2b7b30ebf37f153bc8
      size: 7159379
    - path: ./data/processed_data/X_train.csv
      hash: md5
      md5: 0c4a9b0143c92db522a164cb2ac07c0a
      size: 28633417
    - path: ./src/data_service/scale_data/scale_data.py
      hash: md5
      md5: b7589885b9d573db04685b3ab0e4b761
      size: 1932
    outs:
    - path: ./data/processed_data/X_test_scaled.csv
      hash: md5
      md5: cbfd848cd50b1ef30c5bcca7d56b01fe
      size: 15433546
    - path: ./data/processed_data/X_train_scaled.csv
      hash: md5
      md5: 5d6b0a16da8779aa046668989611f4ec
      size: 61720857
  train:
    cmd: python ./src/modeling_service/training/train.py
    deps:
    - path: ./data/processed_data/X_train_scaled.csv
      hash: md5
      md5: 5d6b0a16da8779aa046668989611f4ec
      size: 61720857
    - path: ./data/processed_data/y_train.csv
      hash: md5
      md5: 4cbc77e19f9426df0931e2e1e79fa510
      size: 210867
    - path: ./src/modeling_service/training/train.py
      hash: md5
      md5: c5fe851338ed5695ab7f9d8a8c691f75
      size: 2711
    outs:
    - path: ./models/RainTomorrow/last_run_model.pkl
      hash: md5
      md5: 97ee114bb8629153ae2da5b48a34d813
      size: 9624825
  evaluate:
    cmd: python ./src/modeling_service/evaluate/evaluate.py
    deps:
    - path: ./data/processed_data/X_test_scaled.csv
      hash: md5
      md5: cbfd848cd50b1ef30c5bcca7d56b01fe
      size: 15433546
    - path: ./data/processed_data/y_test.csv
      hash: md5
      md5: 2dc46ee320a0fd79699f1e859dc3ebb3
      size: 52727
    - path: ./models/
      hash: md5
      md5: 08b090bd5b4344e3cc7dc819b7aa6de0.dir
      size: 19121922
      nfiles: 2
    - path: ./src/modeling_service/evaluate/evaluate.py
      hash: md5
      md5: 634bf927eaed64c8093a276e5bd1a69a
      size: 4027
    outs:
    - path: ./metrics/
      hash: md5
      md5: b8140661e45e9ab3153afd5de037b121.dir
      size: 2529
      nfiles: 2
    - path: metrics/RainTomorrow/lastmetrics.json
      hash: md5
      md5: e8ec0ee83b801fc00fd427610a74752c
      size: 297
  inference:
    cmd: python ./src/inference_service/inference.py
    outs:
    - path: ./models/RainTomorrow/best_current_model.pkl
      hash: md5
      md5: a9f3554cb6d8001631e5a6f1e230ddf6
      size: 9497097
