schema: '2.0'
stages:
  reset_data:
    cmd: python .\src\data_service\ingest_data\reset_data.py
    deps:
    - path: .\data\new_data\
      hash: md5
      md5: 4208a56d95f48a4d50eb12b10c85e12c.dir
      size: 284264
      nfiles: 3
    - path: .\data\raw_data\weatherAUS.csv
      hash: md5
      md5: 38be9d9fce05fc044df3443939cdd18d
      size: 14239516
    - path: .\src\data_service\ingest_data\reset_data.py
      hash: md5
      md5: 5706dc8d067c61c01db26bc75ac011df
      size: 874
    outs:
    - path: .\data\current_data\current_data.csv
      hash: md5
      md5: 50020aa5176d3252875b510ae56f06bd
      size: 18691706
  ingest_new_data:
    cmd: python .\src\data_service\ingest_data\ingest_new_data.py
    deps:
    - path: .\data\current_data\current_data.csv
      hash: md5
      md5: 50020aa5176d3252875b510ae56f06bd
      size: 18691706
    - path: .\src\data_service\ingest_data\ingest_new_data.py
      hash: md5
      md5: 1a720ac16dc2a71717297dd10f9f7451
      size: 3007
    outs:
    - path: .\data\current_data\uptodate_data.csv
      hash: md5
      md5: 50020aa5176d3252875b510ae56f06bd
      size: 18691706
  complete_nas:
    cmd: python ./src/data_service/complete_nas/complete_nas.py
    deps:
    - path: ./src/data_service/complete_nas/complete_nas.py
      hash: md5
      md5: b9acac6afc3bd622fe522507d893623b
      size: 5188
    - path: .\data\current_data\uptodate_data.csv
      hash: md5
      md5: 50020aa5176d3252875b510ae56f06bd
      size: 18691706
    outs:
    - path: ./data/processed_data/nas_completed_data.csv
      hash: md5
      md5: 3c2e490c6c53bf0b145b81a19975f060
      size: 20080446
  add_features:
    cmd: python ./src/data_service/features/add_features.py
    deps:
    - path: ./data/processed_data/nas_completed_data.csv
      hash: md5
      md5: 3c2e490c6c53bf0b145b81a19975f060
      size: 20080446
    - path: ./src/data_service/features/add_features.py
      hash: md5
      md5: 771a579e7ce15f78031d5b59fe5c6fb2
      size: 1941
    outs:
    - path: ./data/processed_data/augmented_data.csv
      hash: md5
      md5: 0261ea4ba11adc472920d5208f14c002
      size: 22576616
  encode_data:
    cmd: python ./src/data_service/encode_data/encode_data.py
    deps:
    - path: ./data/processed_data/augmented_data.csv
      hash: md5
      md5: 0261ea4ba11adc472920d5208f14c002
      size: 22576616
    - path: ./src/data_service/encode_data/encode_data.py
      hash: md5
      md5: b774fa8fe3e6ec90b8fa06642c6c8b1c
      size: 8504
    outs:
    - path: ./data/processed_data/encoded_data.csv
      hash: md5
      md5: 02bb12505b74dc0fe2e6e2accb0edcb6
      size: 46491127
  split_data:
    cmd: python ./src/data_service/split_data/split_data.py
    deps:
    - path: ./data/processed_data/encoded_data.csv
      hash: md5
      md5: 02bb12505b74dc0fe2e6e2accb0edcb6
      size: 46491127
    - path: ./src/data_service/split_data/split_data.py
      hash: md5
      md5: 6a0f745ccfdeb37933015a0ad35a9b4c
      size: 3229
    outs:
    - path: ./data/processed_data/X_test.csv
      hash: md5
      md5: e9048da053bef9349804a59a46c6f169
      size: 7166106
    - path: ./data/processed_data/X_train.csv
      hash: md5
      md5: 0d32f95b60362eaffbc372e099a86b12
      size: 28653320
    - path: ./data/processed_data/y_test.csv
      hash: md5
      md5: 4f1574d44157beac8f84085076a07046
      size: 52377
    - path: ./data/processed_data/y_train.csv
      hash: md5
      md5: 9981cd178c956c894e63b23efad6bda5
      size: 209467
  scale_data:
    cmd: python ./src/data_service/scale_data/scale_data.py
    deps:
    - path: ./data/processed_data/X_test.csv
      hash: md5
      md5: e9048da053bef9349804a59a46c6f169
      size: 7166106
    - path: ./data/processed_data/X_train.csv
      hash: md5
      md5: 0d32f95b60362eaffbc372e099a86b12
      size: 28653320
    - path: ./src/data_service/scale_data/scale_data.py
      hash: md5
      md5: 0ccefd2f49e7fdd171f0a1ee327c5ae3
      size: 1853
    outs:
    - path: ./data/processed_data/X_test_scaled.csv
      hash: md5
      md5: c032e2c1bd5db7a9e9821697c9acd426
      size: 15451097
    - path: ./data/processed_data/X_train_scaled.csv
      hash: md5
      md5: 3e47bf9138dd8ad00867788535b39dd5
      size: 61767580
  train:
    cmd: python ./src/modeling_service/training/train.py
    deps:
    - path: ./data/processed_data/X_train_scaled.csv
      hash: md5
      md5: 3e47bf9138dd8ad00867788535b39dd5
      size: 61767580
    - path: ./data/processed_data/y_train.csv
      hash: md5
      md5: 9981cd178c956c894e63b23efad6bda5
      size: 209467
    - path: ./src/modeling_service/training/train.py
      hash: md5
      md5: 958beb2e1a74cc574c79288e580f6154
      size: 2650
    outs:
    - path: ./models/
      hash: md5
      md5: ff1ef7eb5b24daa924d2142d5f16411a.dir
      size: 4697972
      nfiles: 2
  evaluate:
    cmd: python ./src/modeling_service/evaluate/evaluate.py
    deps:
    - path: ./data/processed_data/X_test_scaled.csv
      hash: md5
      md5: c032e2c1bd5db7a9e9821697c9acd426
      size: 15451097
    - path: ./data/processed_data/y_test.csv
      hash: md5
      md5: 4f1574d44157beac8f84085076a07046
      size: 52377
    - path: ./models/
      hash: md5
      md5: ff1ef7eb5b24daa924d2142d5f16411a.dir
      size: 4697972
      nfiles: 2
    - path: ./src/modeling_service/evaluate/evaluate.py
      hash: md5
      md5: e57d67bce9ac95cf05eb5bcf940efcda
      size: 4238
    outs:
    - path: ./metrics/
      hash: md5
      md5: 279b16c8b00989f6d256de6a6026ed8b.dir
      size: 515
      nfiles: 2
    - path: metrics/RainTomorrow/LogisticRegression_metrics.json
      hash: md5
      md5: 964dd29af8e727cd725e8df0de443f20
      size: 259
  mlflow_setup:
    cmd: python .\src\tracking_service\mlflow\mlflow_setup.py
    deps:
    - path: .\src\tracking_service\mlfow\mlflow_setup.py
      hash: md5
      md5: 4ebf5f1955757ab60077dccad3f66d0f
      size: 1959
    outs:
    - path: .\data\parameters
      hash: md5
      md5: b6d53610be9837c3369afd6b82b45388.dir
      size: 1864
      nfiles: 4
